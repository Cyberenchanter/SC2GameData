<?xml version="1.0" encoding="utf-8"?>
<Catalog>
    <CAbilBehavior default="1" id="War3_CriticalStrike" parent="War3_Passive">
        <AbilityCategories index="PassiveMagic" value="1"/>
    </CAbilBehavior>
    <CAbilBehavior default="1" id="War3_AbilityOrb" parent="War3_Passive"/>
    <CAbilBehavior default="1" id="War3_Aura" parent="War3_Passive">
        <AbilityCategories index="Aura" value="1"/>
        <!--Aura does not count as passive in war3-->
        <AbilityCategories index="Passive" value="0"/>
        <Alignment value="Positive"/>
    </CAbilBehavior>
    <CAbilMorph default="1" id="War3_MorphToggle" parent="War3_Morph">
        <?token id="normalID" type="CUnitLink"?>
        <Alignment value="Positive"/>
        <EditorCategories value="Race:Human,AbilityorEffectType:Units"/>
        <AbilityCategories index="Physical" value="1"/>
        <Flags index="DisableAbils" value="0"/>
        <Flags index="Toggle" value="1"/>
        <InfoArrayUnmorph Unit="##normalID##"/>
        <CostUnmorph>
            <Cooldown Location="Unit"/>
        </CostUnmorph>
    </CAbilMorph>
    <CAbilEffectTarget default="1" id="War3_AutoTargetSpell" parent="War3_EffectTarget">
        <EditorCategories value="Race:Human,AbilityorEffectType:Units"/>
        <AutoCastRange value="9.375"/>
        <Flags index="AutoCast" value="1"/>
        <Marker>
            <MismatchFlags index="CasterUnit" value="1"/>
        </Marker>
        <TargetSorts RequestCount="1">
            <SortArray value="TSDistance"/>
        </TargetSorts>
        <AutoCastValidatorArray value="NotHallucination"/>
        <AutoCastValidatorArray value="noMarkers"/>
        <AutoCastValidatorArray value="War3_IsNotSleeping"/>
    </CAbilEffectTarget>
    <CAbilEffectInstant default="1" id="War3_ClosestTargetSpell" parent="War3_EffectInstant">
        <TargetFilters value="dead;self,allies,neutral,enemies,ward,structure,wall,tree,Missile,debris,Hidden,invulnerable,item"/>
        <Range value="0"/>
        <Alignment value="Positive"/>
        <AutoCastFilters value="Visible;-"/>
        <TargetSorts>
            <SortArray value="TSDistance"/>
        </TargetSorts>
    </CAbilEffectInstant>
    <CAbilMorph default="1" id="ANsu" parent="War3_MorphToggle">
        <AbilSetId value="submerge"/>
        <EditorCategories value="Race:Creeps,AbilityorEffectType:Units"/>
        <TechAliasArray value="_ABILITY_Submerge"/>
        <AbilityCategories index="Physical" value="0"/>
        <AbilityCategories index="CanBeDisabled" value="1"/>
        <AbilityCategories index="CanBeIllusionDisabled" value="1"/>
        <CmdButtonArray index="Execute">
            <Flags index="ToSelection" value="1"/>
            <Flags index="UseDefaultButton" value="1"/>
            <Flags index="CreateDefaultButton" value="1"/>
        </CmdButtonArray>
        <CmdButtonArray index="Unmorph" Requirements="##id##">
            <Flags index="UseDefaultButton" value="1"/>
            <Flags index="CreateDefaultButton" value="1"/>
        </CmdButtonArray>
        <InfoArray index="0" Unit="hmil">
            <SectionArray index="Actor">
                <DurationArray index="Duration" value="1.45"/>
            </SectionArray>
        </InfoArray>
        <InfoArrayUnmorph index="0" Unit="##normalID##">
            <SectionArray index="Actor">
                <DurationArray index="Duration" value="1.45"/>
            </SectionArray>
        </InfoArrayUnmorph>
        <ValidatorArray value="OnDeepWater"/>
    </CAbilMorph>
    <!--ItemRandomItem-->
    <CAbilEffectTarget id="AIri" parent="War3_EffectTarget">
        <EditorCategories value="Race:Other,AbilityorEffectType:Item"/>
        <TechAliasArray value="_ABILITY_ItemRandomItem"/>
        <AbilityCategories index="CanBeDisabled" value="1"/>
        <AbilityCategories index="CanBeSilenced" value="1"/>
        <AbilityCategories index="CanBeIllusionDisabled" value="1"/>
        <TargetFilters index="0" value="Item;ward,wall,tree,debris,Dead,invulnerable,Decaying,Raisable"/>
        <Flags index="TransportAcquirePassengers" value="1"/>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="HearthstoneCoop" parent="War3_EffectTarget">
        <EditorCategories value="Race:Other,AbilityorEffectType:Item"/>
        <Effect index="0" value="HearthstoneCoop@Target"/>
        <Flags index="HomogenousInterrupt" value="0"/>
        <Range value="1000"/>
        <CastOutroTime value="5"/>
        <ShowProgressArray index="Channel" value="1"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Channel" value="1"/>
        <ProgressButtonArray index="Channel" value="HearthstoneCoop"/>
        <Cost index="0">
            <Cooldown Location="Unit" TimeStart="180" TimeUse="180"/>
        </Cost>
    </CAbilEffectTarget>
    <CAbilEffectInstant id="Hearthstone" parent="War3_EffectInstant">
        <Alignment value="Positive"/>
        <Cost index="0">
            <Charge CountMax="500" CountUse="1" Location="Unit"/>
            <Cooldown Location="Unit" TimeUse="2"/>
        </Cost>
        <ShowProgressArray index="Channel" value="1"/>
        <ProgressButtonArray index="Channel" value="AItp"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Channel" value="1"/>
        <CastOutroTime value="5"/>
    </CAbilEffectInstant>
    <!--Rune of Rebirth Buff=BIrb-->
    <CAbilEffectTarget id="AIrb" parent="War3_EffectTarget">
        <TechAliasArray value="_ABILITY_Rebirth"/>
        <AbilityCategories index="CanBeDisabled" value="1"/>
        <AbilityCategories index="CanBeSilenced" value="1"/>
        <AbilityCategories index="CanBeIllusionDisabled" value="1"/>
        <EditorCategories value="Race:Other,AbilityorEffectType:Item"/>
    </CAbilEffectTarget>
    <CAbilTrain id="usap@Train" parent="War3_Train">
        <Flags index="BestUnit" value="0"/>
        <Flags index="BypassFoodRestriction" value="1"/>
        <Flags index="IgnoreUnitCost" value="1"/>
        <InfoArray index="Train1" Effect="Alam@RemoveLamb">
            <Button DefaultButtonFace="ushd">
                <Flags index="CreateDefaultButton" value="0"/>
            </Button>
            <Unit value="ushd"/>
        </InfoArray>
    </CAbilTrain>
    <CAbilInteract id="GoldMineDisplayWorker" parent="War3_Interact">
        <Name value="Name/GouldMineDisplayWorker"/>
        <Alignment value="Positive"/>
        <Flags index="AutoCast" value="1"/>
        <Flags index="BestUnit" value="1"/>
        <Flags index="SameCliffLevel" value="1"/>
        <Flags index="ShareControl" value="1"/>
        <Range value="20"/>
        <TargetFilters value="Worker;Player,Ally,Neutral,Hidden,Hallucination"/>
        <SmartValidatorArray value="IsPeonOrPeasant"/>
        <AutoCastFilters value="Worker;Player,Ally,Neutral,Hidden,Hallucination"/>
        <AutoCastRange value="20"/>
        <AutoCastValidatorArray value="IsPeonOrPeasant"/>
    </CAbilInteract>
</Catalog>
